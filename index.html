
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Scouting Owl</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->
	<!-- Link to MathJax script from CDN -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"></script>

<!-- Configuration script -->
    <script type="text/x-mathjax-config">
        //Note the above <script> attribute type="text/x-mathjax-config" 
            MathJax.Hub.Config({
                tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
            });
    </script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Scouting Owl</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#intro">Introduction</a></li>
            <li><a href="#obj">Project Objective</a></li>
            <li><a href="#harddesign">Hardware Design</a></li>
            <li><a href="#softdesign">Software Design</a></li>
            <li><a href="#testing">Testing</a></li>
            <li><a href="#result">Result</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">

      <div class="starter-template">
        <h1>Rescue Robot: Scouting Owl</h1>
        <p class="lead">Robby Huang (lh479) | Parth Sarthi Sharma (pss242)
		<br>
		ECE 5725 | May 19, 2021</p>
      </div>

      <hr>
      <div class="center-block">
          <iframe width="640" height="360" src="https://www.youtube.com/embed/dQw4w9WgXcQ" frameborder="0" allowfullscreen></iframe>
          <h5 style="text-align:center;">Demonstration Video</h5>
      </div>

      <hr id="intro">

      <div style="text-align:center;">
              <h2>Introduction</h2>
              <p style="text-align: justify;padding: 0px 30px;">In incidents such as gas leakage, nuclear explosion, or any environment that has potential threats to the life of the rescuer, a Rescue Bot can play an important role in searching for survivors and studying the hazardous conditions. Rescue Bot is a robot that allows the rescuer to detect and communicate with the survivor in an environment that is not yet suitable for in-person rescue.</p>
      </div>

    <hr id='obj'>

      <div class="row">
          <div class="col-md-4" style="text-align:center;">
          <img class="img-rounded" src="pics/botImage.JPG" alt="Generic placeholder image" width="300" height="200">
          </div>
          <div class="col-md-8" style="font-size:18px;">
          <h2>Project Objective:</h2>
          <ul>
			<li>Establish a reliable half-duplex connection between the robot and the control device.</li>
			<li>Fetch and display live IR camera feed along with sensor data on the display device.</li>
            <li>Send commands from the control device to the robot.</li>
			<li>Implement a function for the robot to map the surrounding area and display the map on the screen.</li>
          </ul>
          </div>
      </div>

    <hr id='harddesign'>

      <div style="text-align:center;">
              <h2>Hardware Design</h2>
			  <div style="text-align:center;">
				  <img class="img-rounded" src="pics/PiWithSensors.png" alt="Generic placeholder image" style="width:50%;">
				  <h5>Circuit connection of all the components</h5>
			  </div>
              <h4 style="text-align: justify;padding: 0px 30px;">Infrared Thermal Camera</h4>
			  <p style="text-align: justify;padding: 0px 30px;">In order to get a live feed of our surroundings, we used the Adafruit AMG8833 IR Thermal Camera. This camera module has 12 pins, out of which we only used 4. In order to get data from the camera, we used the I2C communication protocol. We also needed to install the "adafruit_amg88xx" library in order to use the module. Once running, the module returns an array of 64 individual infrared temperature readings over I2C. This module can measure temperatures ranging from 0°C to 80°C with an accuracy of +- 2.5°C making it ideal for our application. It can also detect a human from a distance of up to 7 meters. In order to get an image from the 8x8 array, we used image processing using the SciPy python library in order to interpolate the 8x8 grid.</p>
			  <div style="text-align:center;">
				  <img class="img-rounded" src="pics/IRCamera.jpg" alt="Generic placeholder image" style="width:30%;">
				  <h5>The IR Thermal Camera</h5>
			  </div>
			  
			  <br>
			  
			  <h4 style="text-align: justify;padding: 0px 30px;">Implementing Sensors</h4>
			  <p style="text-align: justify;padding: 0px 30px;">Along with the IR camera, our rescue robot is equipped with the following sensors:</p>
			  <ol>
				<li style="text-align: justify;">The flame sensor: We used the flame sensor in order to see if there is any fire nearby. If so, the rescuers are alerted about it on the display device. This sensor gives out a digital output corrosponding to whether fire is present or not. In order to receive the output, we used an edge triggered callback function because it saves precious CPU cycles.</li>
				<div style="text-align:center;">
				  <img class="img-rounded" src="pics/flameSensor.jpg" alt="Generic placeholder image" style="width:20%;">
				  <h5>The Flame Sensor</h5>
				</div>
				<li style="text-align: justify;">The water sensor: We used the water sensor in order to see the presense of water. Since our robot is an electronic device, it is prone to short-circuits when it comes in contact with water. Similar to the flame sensor, this sensor gives out a digital output corrosponding to whether water is present or not. In order to receive the output, we used an edge triggered callback function because it saves precious CPU cycles.</li>
				<div style="text-align:center;">
				  <img class="img-rounded" src="pics/waterSensor.jfif" alt="Generic placeholder image" style="width:20%;">
				  <h5>The Water Sensor</h5>
				</div>
				<p style="text-align: justify;padding: 0px 30px;">Initially, while testing the flame sensor we were using a piezo-electric barbeque lighter. We were hoping to see the results we wanted to see. However, we found out that the lighter triggered both flame and the water sensor and all for wrong reasons. After debugging for hours, we found out that the lighter we were using generated thousands of volts for a short period of time which resulted in generation of EM waves. These waves were intercepted by the wires acting as an antenna which triggred the interrupts.</p>
				<li style="text-align: justify;">The radiation sensor: In order to utilize the above phenomenon, we added a long wire connected to a free GPIO pin. This wire acts as an antenna and can detect such bursts of radiation. In order to test our hypothesis, we hooked up the wire to an oscilloscope and tested the result. We found out that it does in fact detect EM discharges.</li>
				<div style="text-align:center;">
				  <img class="img-rounded" src="pics/radiationSensor.png" alt="Generic placeholder image" style="width:50%;">
				  <h5>The Water Sensor</h5>
				</div>
				<li style="text-align: justify;">The temperature sensor: In order to get a measurement of the temperature, we used the LM393 temperature sensor. This sensor gives out a raw ADC value which needs to be converted into the corrosponding temperature value using the expression: $$temperature = 10 * log_{10}(10000 * (\frac{3.3 * 1024}{adc} - 1)) - 10$$</li>
				<div style="text-align:center;">
				  <img class="img-rounded" src="pics/temperatureSensor.jfif" alt="Generic placeholder image" style="width:20%;">
				  <h5>The Temperature Sensor</h5>
				</div>
				<li style="text-align: justify;">The ultrasonic data</li>
			  </ol>
      </div>

    <hr id='softdesign'>

      <div style="text-align:center;">
              <h2>Software Design</h2>
              <p style="text-align: justify;padding: 0px 30px;">The software design of the project consists of two main parts:</p>
			  <ul>
				<li style="text-align: justify;">The Python program running on the Raspberry Pi.</li>
				<li style="text-align: justify;">The Android application running on the user device.</li>
			  </ul>
			  <p style="text-align: justify;padding: 0px 30px;">The main architecture of the software design is based on the fact that the Android app and the Python program communicate with each other over a TCP/IP server. The Python program creates a TCP/IP server and opens up a socket for communication. Once the socket is created, it listens and waits for clients to connect to it. Once a client is connected to the server, the main Python program starts executing. During each cycle of execution, the data packet that is sent consists of the following components:</p>
			  <ul>
				<li style="text-align: justify;">The IR camera feed:</li>
				<ul>
					<li style="text-align: justify;">The pixel array</li>
					<li style="text-align: justify;">The bicubics array</li>
					<li style="text-align: justify;">The colour array</li>
				</ul>
				<li style="text-align: justify;">The sensor values:</li>
				<ul>
					<li style="text-align: justify;">The water sensor data</li>
					<li style="text-align: justify;">The fire sensor data</li>
					<li style="text-align: justify;">The radiation sensor data</li>
					<li style="text-align: justify;">The temperaure sensor data</li>
					<li style="text-align: justify;">The ultrasonic data</li>
				</ul>
			  </ul>
			  <p style="text-align: justify;padding: 0px 30px;">All these different data values are semi-colon (";") delimited and the values in the same data array are comma (",") delimited. All these data points are appended in a single string. The string is then encoded and sent over the TCP/IP socket. After sending the data, the server then waits for the commands from the client in a blocking manner. Once a string is received, the server decodes the string and changes the functions as per the received command.</p>
			  <div style="text-align:center;">
				  <img class="img-rounded" src="pics/pythonFlow.png" alt="Generic placeholder image" style="width:100%;">
				  <h5>The flow diagram for the Python program</h5>
			  </div>
			  <p style="text-align: justify;padding: 0px 30px;">The Android application works in a similar fashion. When the client starts, it searches for the server with given credentials. Once it is connected to the server, it waits for data to be received in a blocking manner. Once the data is received, the client decodes the data, splits it into IR camera feed and sensor values and updates the values on the screen. Once the screen has been updated, the client checks for button presses. If a button has been pressed, the client encodes the associated command and sends it over to the server. Otherwise, it encodes the stop command and send the command over to the said server.</p>
			  <div style="text-align:center;">
				  <img class="img-rounded" src="pics/javaFlow.png" alt="Generic placeholder image" style="width:100%;">
				  <h5>The flow diagram for Android application</h5>
			  </div>
			  <p style="text-align: justify;padding: 0px 30px;">The biggest challenge while implimenting the said algorithm was that the Wi-Fi router at our apartment was blocking the TCP/IP packets and therefore, wasn't allowing the connection between the server and the client to be established. In order to tackle this problem, we simply connected the RaspberryPi and the Android device to Cornell's open "RedRover". This allowed us to implement the system quite effectively.</p>
			  <p style="text-align: justify;padding: 0px 30px;">Another challenge we faced on the software side was that connecting to RedRover didn't allow us to update our kernel or install any new package. The reason behind this is that RedRover needs the users to login using Cornell NetID. Once logged in, we were able to use it like any other network.</p>
			  
			  <br>
      </div>

    <hr id='testing'>

      <div style="text-align:center;">
              <h2>Testing</h2>
              <p style="text-align: justify;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr id='result'>

      <div style="text-align:center;">
              <h2>Result</h2>
              <p style="text-align: justify;padding: 0px 30px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum lorem nulla, consectetur at leo vel, pretium bibendum nisl. Cras blandit quam a enim ultrices, eu convallis enim posuere. Donec eleifend enim sed purus consectetur, vitae cursus lectus varius. Vivamus consectetur felis nec est venenatis posuere. Phasellus vitae aliquet erat. In laoreet lacinia mollis. Quisque iaculis nisl fermentum pharetra lobortis. Donec rhoncus dui sem, ac molestie leo tristique vel. Phasellus in nibh feugiat, fringilla lectus in, elementum magna. Etiam quis dui condimentum, tempus ex in, dapibus est. Cras ut congue augue. Donec ac enim ex. Ut id tristique risus, vel porttitor quam. Sed ultricies enim eu nibh porttitor, vel sodales enim feugiat. Fusce volutpat venenatis magna ac ultrices. Curabitur eget urna ut nulla mattis convallis non eu diam.</p>
      </div>

    <hr>

    <div class="row" style="text-align:center;">
          <h2>Work Distribution</h2>
          <div style="text-align:center;">
              <img class="img-rounded" src="pics/group.jpg" alt="Generic placeholder image" style="width:80%;">
              <h5>Project group picture</h5>
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/a.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Rick</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Designed the overall software architecture (Just being himself).
          </div>
          <div class="col-md-6" style="font-size:16px">
              <img class="img-rounded" src="pics/b.png" alt="Generic placeholder image" width="240" height="240">
              <h3>Morty</h3>
              <p class="lead">netid@cornell.edu</p>
              <p>Tested the overall system.
          </div>
      </div>

    <hr>
      <div style="font-size:18px">
          <h2>Parts List</h2>
          <ul>
              <li>Raspberry Pi $35.00</li>
              <li>Raspberry Pi Camera V2 $25.00</li>
              <a href="https://www.adafruit.com/product/1463"><li>NeoPixel Ring - $9.95</li></a>
              <li>LEDs, Resistors and Wires - Provided in lab</li>
          </ul>
          <h3>Total: $69.95</h3>
      </div>
      <hr>
      <div style="font-size:18px">
          <h2>References</h2>
          <a href="https://picamera.readthedocs.io/">PiCamera Document</a><br>
          <a href="http://www.micropik.com/PDF/SG90Servo.pdf">Tower Pro Servo Datasheet</a><br>
          <a href="http://getbootstrap.com/">Bootstrap</a><br>
          <a href="http://abyz.co.uk/rpi/pigpio/">Pigpio Library</a><br>
          <a href="https://sourceforge.net/p/raspberry-gpio-python/wiki/Home/">R-Pi GPIO Document</a><br>

      </div>

    <hr>

      <div class="row">
              <h2>Code Appendix</h2>
              <pre><code>
// Hello World.c
int main(){
  printf("Hello World.\n");
}
              </code></pre>
      </div>

    </div><!-- /.container -->




    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
  </body>
</html>
